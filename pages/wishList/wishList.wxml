<!-- pages/wishList/wishList.wxml -->
<view class="content_new">
  <view class="header_new">
    <view class="input_new hr">
      <view class="lable">有效日期：</view>
      <view bindtap="showDatePicker">
        <input class="value_new" type="text" placeholder-class="placeholder_new" value="{{listDueTime}}" placeholder="请选择有效日期" disabled />
      </view>
    </view>
    <view class="input_new hr">
      <view class="lable">心愿标题：</view>
      <input class="value_new" placeholder-class="placeholder_new" bindinput="bindKeyInput" placeholder="请填写心愿标题" bindblur="bindListDescCompleted" class="value_new" value="{{listDescription}}" />
    </view>
    <view class="input_new">
      <view class="lable">心愿描述：</view>
      <input class="value_new" placeholder-class="placeholder_new" bindinput="bindKeyInput" placeholder="请填写心愿描述" bindblur="bindListDescCompleted" class="value_new" value="{{listDescription}}" />
    </view>
  </view>
  <view class="content_lists_new">
    <block wx:for="{{wishes}}" wx:for-item="item" wx:key="wishID">
      <view class="input_new list_input hr">
        <view class="lable list_input_label">{{index+1}}</view>
        <view class="list_input_box">
          <input bindinput="bindWishKeyInput" data-id="{{index}}" bindblur="bindDescCompleted" value="{{item.description}}" class="value_new" type="text" placeholder-class="placeholder_new" placeholder="请输入内容..." />
        </view>
        <view data-index="{{index}}" bindtap="delWish">
          <image class="list_icon" mode='aspectFill' src="/images/icon-delete.png" />
        </view>
      </view>
    </block>
    <view class="input_new list_input hr">
      <view class="lable list_input_label"></view>
      <view class="list_input_box"></view>
      <view bindtap="addWishList">
        <image class="list_icon" mode='aspectFill' src="/images/icon-add.png" />
      </view>
    </view>
  </view>
</view>
<view class="tab-header">
  <view class="flex_row_header">
    <view class="lable">愿望实现日期：</view>
    <view bindtap="showDatePicker">
      <!-- {{year}} - {{month}} - {{currentDate}} -->
      {{listDueTime}}
      <!-- <image mode='aspectFill' class='arrow-img-header' src='https://kidneyhealty.com.cn/images/arrow-down-white.png'></image> -->
    </view>
  </view>
  <view class="flex_row_header">
    <view class="lable">愿望列表名：</view>
    <input bindinput="bindKeyInput" bindblur="bindListDescCompleted" class="description" value="{{listDescription}}" />
  </view>
</view>
<view>
  <view class="content">
    <block wx:for="{{wishes}}" wx:for-item="item" wx:key="wishID">
      <view class="row-container" bindtouchstart="touchstart" bindtouchmove="touchmove" data-index="{{index}}">
        <view>
          <image mode='aspectFill' class="con-trimg" src='https://kidneyhealty.com.cn/images/item_icon.png'></image>
        </view>
        <block wx:if="{{item.wishStatus!='NEW'}}">
          <view class="con-info">
            {{item.description}}
            <view class="con-status">{{item.wishStatus}}</view>
          </view>
        </block>
        <block wx:else>
          <input bindinput="bindWishKeyInput" data-id="{{index}}" bindblur="bindDescCompleted" class="con-input" value="{{item.description}}" />
          <view data-index="{{index}}" bindtap="delWish" class="del {{item.moveForDelete}}">X</view>
        </block>
      </view>
    </block>
  </view>
  <view class="btnblock">
    <button bindtap="pickerShow" class="addwishbtn">测试时间</button>
    <button bindtap="addWishList" class="addwishbtn">添加愿望</button>
    <button class="addwishbtn" data-name="shareBtn" open-type="share">分享清单</button>
    <!-- <button class="addwishbtn" bindtap="goTest">前往测试生成海报功能</button> -->
  </view>
  <view>
    <time-picker pickerShow="{{isPickerShow}}" wx:if="{{isPickerRender}}" bind:hidePicker="pickerHide" bind:setPickerTime="setPickerTime" config="{{timePickerConfig}}"></time-picker>
    <wish-poster wishimage="{{wishimage}}" save="{{false}}" bind:success="onPosterSuccess" bind:fail="onPosterFail" id="wish-poster" wishlist="{{wishes}}" wishname="{{listDescription}}" date='{{listDueTime}}'>
      <button>测试生成海报功能</button>
    </wish-poster>
  </view>
</view>
<date-picker id="date-picker" value="{{datePickerValue}}" isShow="{{datePickerIsShow}}" bindsureclick="confirmDate" bindcancelclick="hideDatePicker" />